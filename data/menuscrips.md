第二章 Wi-Fi 信道状态信息定位技术相关理论

2.1 Wi-Fi 信号简介

2.1.1 无线局域网(WLAN) 标准概述
无线局域网（Wireless Local Area Network, WLAN）是指利用射频（Radio Frequency, RF）技术构建的局部网络系统，旨在实现终端设备的无线接入与数据交互。作为WLAN领域应用最为广泛的技术标准，Wi-Fi（Wireless Fidelity）主要基于国际电气和电子工程师协会（IEEE）制定的 802.11 标准族。

自1997年首个标准发布以来，IEEE 802.11经历了多次重大技术演进。其核心演进逻辑主要围绕提高吞吐量、扩展频段资源以及优化多用户并发性能展开：

初期标准： 如 802.11b/g 主要工作在 2.4GHz 频段，奠定了无线通信的基础框架。

高吞吐量阶段： 802.11n (Wi-Fi 4) 引入了多输入多输出（MIMO）技术，显著提升了传输速率。

全频段与高效率阶段： 802.11ac (Wi-Fi 5) 进一步优化了 5GHz 频段的传输能力，而 802.11ax (Wi-Fi 6) 则引入了正交频分多址（OFDMA）技术，有效解决了高密度场景下的频谱效率问题。

目前，Wi-Fi技术已从单纯追求峰值速率转向对低时延、高可靠性及多频段协同（2.4GHz、5GHz 及 6GHz）的深度优化。


2.1.2 Wi-Fi 信号的传播特征

\subsection{Wi-Fi 信号的传播特征}
\label{subsec:wifi_propagation}

Wi-Fi 信号本质上属于高频电磁波，其在空间中的传播过程并非理想化的直线传输，而是受到传播距离、环境结构及动态扰动等多种物理因素的共同影响。为了为后续基于信道状态信息（CSI）的感知与定位方法提供物理基础，本节从路径损耗、多径传播以及信道时变性三个方面，对室内 Wi-Fi 信号的传播特征进行系统分析。

在理想自由空间条件下，Wi-Fi 信号在传播过程中主要表现为能量的空间扩散，其路径损耗可由 Friis 传输方程进行描述。设发射功率为 $P_t$，接收功率为 $P_r$，则二者之间的关系可表示为
\begin{equation}
P_r = P_t G_t G_r \left( \frac{\lambda}{4\pi d} \right)^2 L^{-1},
\end{equation}
其中，$G_t$ 与 $G_r$ 分别表示发射端与接收端天线增益，$\lambda$ 为信号波长，$d$ 为传播距离，$L$ 为系统损耗因子。该模型表明，在理想条件下接收信号功率与传播距离的平方成反比。

然而，在实际室内环境中，自由空间模型难以准确刻画复杂传播条件下的信号衰减特性。为此，工程实践中通常采用对数距离路径损耗模型（Log-distance Path Loss Model）对平均路径损耗进行建模，其表达式为
\begin{equation}
PL(d) = PL(d_0) + 10n \log_{10}\left( \frac{d}{d_0} \right) + X_\sigma,
\end{equation}
其中，$n$ 为路径损耗指数，用以表征环境复杂程度，$X_\sigma$ 为均值为零、标准差为 $\sigma$ 的高斯随机变量，用于描述由墙体、家具等障碍物遮挡引起的阴影衰落效应。该模型在统计意义上更符合室内无线传播的实际特性。

除路径损耗外，多径传播是室内 Wi-Fi 信号的另一显著特征。由于电磁波在传播过程中会与墙体、地面及各类物体发生反射、绕射与散射，接收端获得的信号往往由多条传播路径分量叠加而成。该过程可通过信道冲激响应（Channel Impulse Response, CIR）进行描述：
\begin{equation}
h(t) = \sum_{l=1}^{L} \alpha_l e^{j\phi_l} \delta(t - \tau_l),
\end{equation}
其中，$L$ 表示有效传播路径的数量，$\alpha_l$、$\phi_l$ 与 $\tau_l$ 分别对应第 $l$ 条路径的幅度、相位偏移及时延。由于不同路径分量具有不同的到达时间，多径效应会在频域上引入频率选择性衰落，这也是 Wi-Fi 系统普遍采用正交频分复用（OFDM）技术以对抗信道失真的重要原因。

此外，室内无线信道通常表现出显著的时变特性。当环境中存在人员移动或物体位移时，多径结构会随时间发生变化，导致信道增益和相位持续波动。在无明显直射路径的非视距（Non-Line-of-Sight, NLOS）条件下，接收信号幅度常采用瑞利衰落模型进行统计描述；而在存在较强直射分量的视距（Line-of-Sight, LOS）场景中，则更适合使用莱斯衰落模型。上述衰落模型为理解信道随机性及其对通信性能的影响提供了理论依据。

对于基于 CSI 的无线感知与定位研究而言，相较于仅反映整体接收功率变化的 RSSI 指标，CSI 能够在子载波级别刻画信道的幅度与相位响应，从而更加细粒度地反映多径结构与环境变化。这一特性为后续从无线信号中挖掘目标空间信息提供了重要支撑。




## 2.2 Wi-Fi 无线定位参数

在无线定位系统中，特征参数的提取精度直接决定了定位算法的性能上限。Wi-Fi 定位技术主要利用无线网卡在通信过程中产生的物理层或介质访问控制（MAC）层信息，通过建立信号特征与空间坐标之间的映射关系来实现目标定位。
本节将详细探讨基于 Wi-Fi 信号的两种主流定位表征参数：接收信号强度指示（RSSI）与信道状态信息（CSI）。两者分别从宏观功率与微观频谱特性描述了无线信道的状态。

### 2.2.1 接收信号强度指示 RSSI
\subsection{接收信号强度指示（RSSI）}
\label{subsec:rssi}

接收信号强度指示（Received Signal Strength Indicator, RSSI）是一种由无线通信系统介质访问控制层（MAC Layer）提供的全局性参数，用于刻画接收端天线在给定时刻所观测到的信号功率水平。由于 RSSI 的获取过程不依赖于底层信道的精细结构，其实现方式简单、适用范围广，因此在早期无线定位系统中被广泛采用。

从物理意义上看，RSSI 综合反映了发射功率、传播路径损耗、天线增益以及环境噪声等多种因素的叠加效应。在对数尺度下，其与发射端到接收端之间传播距离的关系通常可由对数距离路径损耗模型近似表示为
\begin{equation}
\mathrm{RSSI}(d) = \mathrm{RSSI}_0 - 10 n \log_{10}\!\left( \frac{d}{d_0} \right) + X_\sigma ,
\end{equation}
其中，$d$ 表示发射端与接收端之间的传播距离，$d_0$ 为参考距离（通常取 $1\,\mathrm{m}$），$\mathrm{RSSI}_0$ 表示在参考距离处测得的接收信号强度，$n$ 为路径损耗指数，用于刻画不同传播环境下信号衰减速率，$X_\sigma$ 为均值为零、方差为 $\sigma^2$ 的随机扰动项，用以描述阴影衰落及测量噪声的影响。

在理想视距（Line-of-Sight, LOS）条件下，上式表明 RSSI 随传播距离的增加呈现出近似单调递减的趋势。这一特性构成了基于 RSSI 的指纹定位方法及测距型定位算法的物理基础。然而，该模型在复杂室内环境中的适用性往往受到多径传播与环境动态变化的显著制约。

在实际应用中，RSSI 的主要局限性源于其特征表达形式的高度简化。首先，RSSI 本质上是多径信号分量在接收端叠加后的总功率标量，无法区分直射路径与反射路径的独立贡献。当接收位置发生微小变化时，不同传播路径之间的相位关系可能发生显著改变，从而引发相长或相消干涉，使 RSSI 出现剧烈波动，即所谓的小尺度衰落现象。其次，RSSI 对环境动态变化较为敏感，人体遮挡、设备姿态变化以及同频无线干扰等因素均可能导致其时间序列呈现明显的非平稳特性。

综合而言，RSSI 作为一种低维度、易获取的无线特征，在实现简单定位或区域级感知任务时具有一定实用价值。



### 2.2.2 信道状态信息 CSI

\subsection{信道状态信息（CSI）}
\label{subsec:csi_definition}

相较于基于接收信号强度指示（Received Signal Strength Indicator, RSSI）的定位方法，信道状态信息（Channel State Information, CSI）提供了更加细粒度的物理层特征描述。在 IEEE 802.11n/ac/ax 等现代 Wi-Fi 标准中，正交频分复用（OFDM）与多输入多输出（MIMO）技术的引入，使得商用无线网卡可以在驱动层获取子载波级别的信道频率响应（Channel Frequency Response, CFR），从而为高精度无线感知与定位提供了数据基础。

从系统模型的角度来看，在 OFDM 通信系统中，宽带信道被划分为多个相互正交的窄带子载波。假设系统配置为 (N_t) 根发射天线与 (N_r) 根接收天线，则在第 (k) 个子载波上，接收信号向量 (\mathbf{y}_k) 与发射信号向量 (\mathbf{x}_k) 之间可表示为
[
\mathbf{y}_k = \mathbf{H}_k \mathbf{x}_k + \mathbf{n}_k,
]
其中 (\mathbf{n}_k) 为加性高斯白噪声向量，(\mathbf{H}_k \in \mathbb{C}^{N_r \times N_t}) 即为该子载波对应的信道状态信息矩阵。当通信链路退化为单输入单输出（SISO）形式时，(\mathbf{H}_k) 可简化为一个复数标量
[
H_k = |H_k| e^{j\angle H_k},
]
其中 (|H_k|) 与 (\angle H_k) 分别表示第 (k) 个子载波的幅度衰减与相位偏移。该复数形式意味着 CSI 不仅反映了信号强度变化，还隐含了传播路径长度、到达时间以及空间角度等关键信息，这是其区别于 RSSI 的核心优势。

从无线传播机理出发，CSI 可以被理解为多径效应在频域中的综合响应。在典型室内环境中，信号从发射端到接收端通常会经历直射路径（LOS）以及多条由墙壁、地面和物体反射或散射形成的非直射路径（NLOS）。根据多径叠加原理，第 (k) 个子载波上的 CSI 可表示为各条传播路径分量的矢量叠加形式
[
H_k = \sum_{l=1}^{L} \alpha_l(t) , e^{-j 2\pi f_k \tau_l},
]
其中 (L) 表示有效传播路径数量，(f_k) 为第 (k) 个子载波的中心频率，(\alpha_l(t)) 为第 (l) 条路径在时刻 (t) 的复衰减系数（综合了路径损耗与初始相位），(\tau_l) 则表示对应的传播时延。由于不同路径的时延存在差异，各子载波在频域上表现出不同的幅度起伏与相位旋转，从而形成具有空间唯一性的频率选择性特征。这种特征在目标位置变化时会发生可观测的变化，为基于 CSI 的定位与感知方法提供了物理基础。

在实际室内场景中，环境通常由静态背景结构与动态目标共同构成，相应地，接收到的 CSI 也可视为静态信道分量与动态扰动分量的叠加。当人员或物体在空间中运动时，其引入的反射路径长度将随时间发生变化，从而导致信道相位出现连续演化。若在时刻 (t) 第 (l) 条路径的长度变化量为 (\Delta d_l(t))，则由该动态路径引起的相位变化可近似表示为
[
\Delta \phi_l(t) = \frac{2\pi}{\lambda} \Delta d_l(t),
]
其中 (\lambda) 为载波波长。由此可见，CSI 相位随时间的微小波动与物理空间中的距离变化之间存在直接对应关系，使其对人体运动与位置变化高度敏感。

需要指出的是，在商用 Wi-Fi 硬件平台中，直接获取的 CSI 相位往往受到载波频率偏移（Carrier Frequency Offset, CFO）和采样时钟偏移（Sampling Frequency Offset, SFO）等非理想因素的影响，表现为整体随机相位偏置与线性漂移项的叠加。这类硬件引入的相位误差并不来源于真实的物理传播过程，若不加处理将显著削弱 CSI 在定位与感知任务中的有效性。



### 2.3.3 RSSI 与 CSI 参数性能对比

尽管接收信号强度指示（Received Signal Strength Indicator, RSSI）与信道状态信息（Channel State Information, CSI）均来源于 Wi-Fi 通信过程，但二者在信号提取层级、物理含义及信息表达形式上的本质差异，决定了其在室内定位与无线感知任务中的性能表现存在显著不同。为明确两类特征在定位应用中的适用性，本节从信息粒度、多径分辨能力等方面对 RSSI 与 CSI 进行对比分析。

从信息表达能力的角度来看，RSSI 属于介质访问控制层（MAC Layer）提供的统计量，其本质是对整个信道带宽内接收信号功率的整体度量。该参数通过对频域能量进行平均化处理，将复杂的信道响应压缩为单一标量数值，虽然便于获取与使用，但不可避免地丢失了大量与空间结构相关的频率信息。相比之下，CSI 直接来源于物理层（PHY Layer），能够在子载波尺度上描述无线信道的频率响应特性。在典型的 20 MHz 带宽配置下，基于 IEEE 802.11n 标准的 CSI 可提供 30–56 个子载波的幅度与相位信息，而在 802.11ax/be 等新一代标准中，其频率分辨率进一步提升。这种细粒度的频谱刻画能力使 CSI 能够更充分地反映空间位置变化对信道响应的影响。此外，在多输入多输出（MIMO）系统中，CSI 以矩阵形式同时包含多天线间的耦合关系，天然携带空间维度信息，为到达角（Angle of Arrival, AoA）估计与空间感知算法提供了基础。

在复杂室内环境中，多径效应是制约定位精度的关键因素之一。RSSI 对多径的处理方式本质上是“被动叠加”：直射路径与所有反射路径的信号功率在接收端进行非相干合成，由于不同路径之间相位关系的随机性，极易产生相长或相消干涉现象。这种干涉效应导致 RSSI 在空间上呈现出明显的小尺度衰落特性，即使目标位置发生微小变化，其测量值也可能出现剧烈波动，同时 RSSI 本身无法区分视距（LOS）与非视距（NLOS）传播路径。相比之下，CSI 借助 OFDM 体制对频率选择性衰落的分解能力，能够在频域上刻画不同子载波所经历的多径影响。进一步地，通过对 CSI 进行逆傅里叶变换（IFFT），可在时域中获得信道的功率延迟谱（Power Delay Profile, PDP），从而在一定程度上分离出直射路径与主要反射路径分量。这一特性使得 CSI 在非视距条件下仍能保留具有判别力的空间特征，显著提升了其在复杂环境中的定位鲁棒性。


为更加直观地展示两类参数在关键性能指标上的差异，表 2-1 给出了 RSSI 与 CSI 的对比结果。

```latex
\begin{table}[htbp]
\centering
\caption{RSSI 与 CSI 性能特征对比}
\label{tab:rssi_csi_comparison}
\begin{tabular}{lcc}
\toprule
\textbf{对比维度} & \textbf{RSSI} & \textbf{CSI} \\
\midrule
网络层级 & MAC 层 & PHY 层 \\
数据结构 & 单一标量（dBm） & 复数向量/矩阵（幅度 + 相位） \\
频率分辨率 & 全频段平均功率 & 子载波级细粒度响应 \\
多径处理能力 & 易受多径叠加影响，难以区分 & 可利用多径特征，具备分离能力 \\
时间稳定性 & 波动较大，受 AGC 影响明显 & 相对稳定，特征维度丰富 \\
定位分辨能力 & 空间区分能力有限 & 空间区分能力较强 \\
\bottomrule
\end{tabular}
\end{table}
```

综上分析可知，RSSI 虽然具有获取方式简单、设备通用性强等优势，但其粗粒度特征形式在频率分辨、多径解析及时序稳定性等方面均存在明显局限，难以满足高精度室内定位的需求。相比之下，CSI 能够从物理层对无线信道传播特性进行更为细致的刻画，尤其在多径分辨与空间敏感性方面展现出显著优势。因此，本文后续研究选择以 CSI 作为核心无线特征参数，并在此基础上开展协同定位方法的设计与验证。

---



\section{CSI 定位相关技术基础}
\label{sec:csi_foundation}

本节从物理层通信机制的角度，对信道状态信息（Channel State Information, CSI）的产生机理及其技术基础进行说明。CSI 的可获取性依赖于现代 Wi-Fi 标准（IEEE 802.11n/ac/ax）所采用的正交频分复用（OFDM）与多输入多输出（MIMO）技术。OFDM 在频域上对宽带信道进行离散化建模，而 MIMO 在空间维度上扩展了信道的观测自由度，两者的结合使得无线信道能够以多维形式被刻画，从而为基于 CSI 的室内定位提供了基础数据支撑。

\subsection{正交频分复用技术（OFDM）}

正交频分复用（Orthogonal Frequency Division Multiplexing, OFDM）是一种典型的多载波调制技术，其核心思想是将宽带高速数据流映射到一组在频域上相互正交的子载波上进行并行传输。设 OFDM 系统包含 $K$ 个子载波，符号持续时间为 $T$，第 $k$ 个子载波的频率为
\begin{equation}
f_k = f_0 + \frac{k}{T}, \quad k = 0,1,\dots,K-1,
\end{equation}
则不同子载波在区间 $[0,T]$ 内满足正交条件
\begin{equation}
\int_{0}^{T} e^{j2\pi f_k t} e^{-j2\pi f_m t} \, dt =
\begin{cases}
T, & k = m, \\
0, & k \neq m.
\end{cases}
\end{equation}

该正交性保证了接收端能够通过快速傅里叶变换（FFT）在频域中无干扰地分离各子载波信号，从而提高系统的频谱利用效率。

在多径环境下，OFDM 通过引入循环前缀（Cyclic Prefix, CP）有效抑制符号间干扰。当循环前缀长度大于信道的最大时延扩展时，宽带频率选择性衰落信道可被等效分解为一组相互独立的窄带平坦衰落子信道。在此条件下，第 $k$ 个子载波上的接收信号可表示为
\begin{equation}
Y_k = H_k X_k + N_k,
\end{equation}
其中 $X_k$ 与 $Y_k$ 分别为发射与接收符号，$N_k$ 为加性高斯白噪声，$H_k$ 为对应子载波的信道频率响应系数。

从定位角度看，$\{H_k\}$ 构成了无线信道在频域上的离散采样结果，其复数幅度与相位共同反映了多径传播条件下不同频率分量的衰落特性。这一子载波级信道响应集合正是 CSI 在 OFDM 系统中的物理本质。

\subsection{多输入多输出技术（MIMO）}

多输入多输出（Multiple-Input Multiple-Output, MIMO）技术通过在发射端和接收端分别部署多根天线，利用无线信道在空间维度上的独立性来增强系统性能。对于一个具有 $N_t$ 个发射天线和 $N_r$ 个接收天线的系统，在第 $k$ 个子载波上，其信道模型可表示为
\begin{equation}
\mathbf{y}_k = \mathbf{H}_k \mathbf{x}_k + \mathbf{n}_k,
\end{equation}
其中 $\mathbf{H}_k \in \mathbb{C}^{N_r \times N_t}$ 为子载波 $k$ 上的 MIMO 信道矩阵，$\mathbf{x}_k$ 和 $\mathbf{y}_k$ 分别表示发射与接收信号向量。

结合 OFDM 体制后，CSI 在整体上可表示为一个三维数据结构
\begin{equation}
\mathcal{H} = \left\{ \mathbf{H}_k \right\}_{k=1}^{K},
\end{equation}
其维度由子载波数量、发射天线数量以及接收天线数量共同决定。与单天线系统相比，多天线配置显著增加了可观测的独立信道链路数量，使得无线信道在空间维度上的差异性能够被更充分地表征。

从空间感知的角度来看，不同接收天线之间的相位差与幅度差隐含了与信号到达方向及空间几何结构相关的信息；同时，多链路联合观测也增强了 CSI 在不同空间位置下的区分能力，有利于构建更具判别性的定位特征。

\subsection{OFDM 与 MIMO 的协同作用}

综合而言，OFDM 通过将宽带信道离散化为子载波级响应，在频域上细化了信道的描述方式；MIMO 则通过多天线结构在空间维度上扩展了信道的观测自由度。二者的协同作用使 CSI 能够从频率与空间两个维度对无线传播环境进行刻画，从而为后续基于 CSI 的室内定位与感知方法提供必要的物理与数学基础。




















A. 分布式单天线节点的 CSI 系统分析

在三维空间中发生位移的目标通常会引入额外的无线传播路径，从而引发信号的反射、折射与散射等复杂传播现象。同时，目标所处位置的变化会改变无线信道的空间相关特性，对三维空间中 Wi-Fi 信号的传播与接收产生显著影响。图 1 直观展示了移动目标位于不同空间位置时，其对三维空间 Wi-Fi 信号特性的影响差异。



本文采用低成本嵌入式设备构建三维空间中的单天线无线节点，并在典型的 Wi-Fi 802.11n 标准、40 MHz 信道带宽条件下开展实验测试。

如图 2 所示，当 ESP32-C6 放置于天线 1 位置时，针对不同空间位置的铝箔包裹泡沫小球，测得的 CSI 幅值随位置变化呈现出明显差异。图 2(a) 给出了原始 CSI 数据结果，其中共包含 114 个子载波。可以观察到，部分子载波（如第 28 和第 84 个子载波）出现了较为明显的幅值下冲现象，同时子载波频谱左、右两侧的幅值分布特性存在一定差异。该现象与 Wi-Fi 标准中直流子载波（DC subcarrier）及保护子载波的设置有关，这些子载波通常不承载有效数据信息。为减少其对后续分析的影响，本文对上述子载波进行剔除，最终保留 112 个有效子载波，其对应的 CSI 幅值变化结果如图 2(b) 所示。

实验中选用铝箔包裹的泡沫小球作为目标物体。该目标具有较强的电磁波反射特性，尽管其物理尺寸较小，但在室内多径环境中仍可能对无线传播路径产生影响。当目标位于 Position 1（橙色曲线）时，部分子载波幅值相对其他位置呈现出较高水平，该现象可能与目标引入的反射分量与直射路径信号之间的叠加效应有关，从而在接收端表现为幅值增强。相对地，位于曲线下方的幅值分布表明，在对应位置下，反射分量与主传播路径之间的相位关系发生变化，导致接收信号幅值出现一定程度的降低。

图 3 给出了目标小球在三维空间中移动至不同位置时的示意图。当目标物体处于不同空间位置时，其引入的无线传播路径及传播条件随之变化，从而导致信号衰减特性存在差异。这些空间位置变化所引起的传播特性差异，最终在 CSI 中表现为幅值扰动。上述结果表明，CSI 对环境中目标物体位置变化具有一定的响应能力，可为后续基于 CSI 的空间感知与定位分析提供实验依据。




此外，如图 4 和图 5 所示（均包含 a、b、c 三个子图），本文进一步在天线 2 所在位置，对 ESP32 与 ESP32-C6 两种嵌入式设备进行了对比实验，测试其在三维空间中面对不同位置的铝箔包裹泡沫小球时所对应的 CSI 变化特性。

在子图 a 中给出了不同目标位置下的子载波幅值分布情况。当设备位于天线 2 位置时，可以观察到 ESP32 在不同空间位置（Position 1–4）下的 CSI 幅值曲线在整体幅度层面高度重合，位置间差异不易直接区分。相比之下，ESP32-C6 在相同实验条件下，其不同位置对应的幅值曲线在整体幅度水平上呈现出更为明显的分层特征，表明其对子载波幅值变化的响应在不同空间位置间具有更高的可区分性。

子图 b 给出了在去除静态环境影响后得到的幅值差分结果（Amplitude Difference，Target–NoTarget）。对于 ESP32-C6，不同位置（Position 1–4）对应的幅值差分曲线在波形形态及幅度范围上均表现出较为明显的差异，其动态范围约分布在 −6 至 6 之间。该特性表明，不同空间位置引入的 CSI 扰动在差分特征中得到了较为充分的体现。相对而言，ESP32 的幅值差分主要集中在 −1 至 1.5 的较窄区间内，且不同位置之间的曲线重叠度较高，整体波动形态较为相似。在相同实验环境下，这种特征分布特性使得不同位置对应的差分“指纹”区分度相对有限。

在子图 c 中对两种设备的 CSI 相位特性进行了对比分析。可以观察到，ESP32 的相位曲线在子载波索引 0–80 区间内呈现出明显的非线性起伏特征，并在约第 80 个子载波附近出现显著的相位不连续现象，即相位值发生突变。该现象表明其相位响应中存在较为明显的非线性畸变，可能与芯片在 OFDM 信号处理过程中受到符号定时偏移（STO）及载波频率偏移（CFO）等因素的影响有关。相比之下，ESP32-C6 的相位曲线整体呈现出较为规则的近线性变化趋势，形态上接近“V”字型分布，表明其相位响应的线性一致性较好，残余相位偏差在一定程度上可通过线性建模方式进行补偿。

综合上述幅值与相位特性的对比结果可以看出，在相同实验配置与环境条件下，ESP32-C6 在 CSI 幅值区分度及相位稳定性方面均表现出相对更优的特性。因此，本文在后续实验中选用 ESP32-C6 作为 CSI 数据采集平台。




图 6 展示了三台 ESP32-C6 设备在相同实验环境条件下，分别部署于天线 1、天线 2 和天线 3 位置时所测得的 CSI 特性。尽管实验中目标物体（铝箔包裹泡沫小球）保持静止状态，但由于各设备在三维空间中的物理位置不同，其对应的无线传播路径及多径条件存在差异，从而导致所采集的 CSI 特征在幅值和相位层面均呈现出明显区别。此外，嵌入式设备硬件特性的细微差异也可能对测量结果产生一定影响。

图 6(a) 给出了三台设备的 CSI 平均幅值对比结果。可以观察到，不同设备对应的子载波幅值曲线在整体形态上存在显著差异，反映出明显的多径“指纹”特征。例如，设备 2 在低频子载波区间（约第 20–40 个子载波）出现较高的幅值峰值，而设备 1 则在高频子载波附近（约第 80 个子载波）达到相对峰值水平。该现象表明，不同天线位置接收到的由目标物体、地面及墙壁等反射体引入的多径分量在叠加方式上存在差异，从而在 CSI 幅值分布中表现出不同的增强或衰减特性。相较于其他位置，设备 2 的整体幅值波动幅度更为明显，说明该位置下接收到的有效信号分量在幅值层面具有更强的变化特征。

图 6(b) 给出了对应的幅值稳定性分析结果，即子载波幅值的标准差分布。可以看到，尽管设备 2 在平均幅值层面表现出较高水平，但其标准差同样相对较大，表明该位置的 CSI 幅值波动性更强。这一现象表明，该测量位置下的信道状态对环境中微小扰动较为敏感，其波动可能与环境变化、设备噪声或供电稳定性等因素共同作用有关。

图 6(c) 展示了三台设备的 CSI 去卷绕相位分布情况。可以观察到，三者的相位曲线整体均呈现出较好的线性变化趋势，未出现明显的相位突变现象，反映出 ESP32-C6 在相位采样过程中的稳定性。具体而言，设备 1 与设备 3 的相位曲线形态较为相似，均呈现出近似“V”字形分布，且斜率接近，表明其对应的主要传播路径特性在一定程度上具有相似性。相比之下，设备 2 的相位变化趋势与前两者存在明显差异，其前半段相位变化较为平缓，而后半段斜率显著增大，反映出该位置下信号传播条件与其他天线位置存在差别。这种差异进一步体现了三维空间中天线部署位置对信道特性的影响。

此外，图 6(a)–(c) 还分别给出了设备 3 在不同目标位置下的三维曲面图（Surface Plot），从频率和时间两个维度直观展示了 CSI 信号的变化特征。结果表明，不同空间位置引入的信道扰动在时频域中呈现出结构化差异。

上述实验结果表明，不同 ESP32-C6 节点在空间中部署位置的差异能够在 CSI 特征中得到体现。这为后续通过融合多节点接收天线所采集的 CSI 信息，并将特定信道特征与空间位置建立映射关系，提供了实验基础，从而为基于深度学习的空间特征学习与定位建模提供支持。





幅值与相位特征的稳定性与可用性分析

## 幅值与相位稳定性分析

为进一步定量分析 CSI 在不同空间位置下的稳定性与区分能力，本文选取第 20 个子载波作为代表，对其幅值与相位特性进行统计分析。相关结果如图 7 所示，其中图 7(a) 为第 20 子载波的 IQ 星座分布，图 7(b) 为对应的幅值分布情况，图 7(c) 展示了幅值随时间变化的轨迹。

### （1）幅值稳定性指标：变异系数

为衡量 CSI 幅值在时间维度上的稳定性，本文采用变异系数（Coefficient of Variation, CV）作为评价指标。变异系数定义为幅值标准差与均值之比，可用于描述信号相对离散程度，其数值越小，表明信号在统计意义上越稳定。其数学表达式为
[
CV = \frac{\sigma}{\mu} \times 100%
]
其中，$\sigma$ 表示 CSI 幅值的标准差，$\mu$ 表示幅值的平均值。

### （2）基于复平面 IQ 中心距离的区分度指标

除幅值稳定性外，为评估不同空间位置对应信号在复平面上的可分性，本文进一步引入基于 IQ 星座中心距离的区分度指标。该指标通过计算不同位置下 CSI 复数均值点在复平面中的欧几里得距离，反映其在统计意义上的分离程度。

设位置 A 与位置 B 在复平面中的中心点分别为
[
C_A = I_A + jQ_A,\quad C_B = I_B + jQ_B
]
则二者的中心距离定义为
[
\text{Dist}_{AB} = |C_A - C_B| = \sqrt{(I_A - I_B)^2 + (Q_A - Q_B)^2}
]
该距离越大，表明对应位置在 IQ 特征空间中的区分度越高。

### （3）定量统计结果分析

表 X 给出了第 20 号子载波在不同空间位置下的幅值统计结果。可以看到，在“无目标”及四个目标位置条件下，幅值均值分布存在一定差异，而对应的变异系数整体处于 4.11%–7.07% 区间内，平均 CV 值约为 5.51%。该结果表明，尽管 CSI 幅值随时间存在一定波动，但其统计均值仍保持相对稳定，具备作为位置特征的可行性。

进一步地，基于 IQ 星座中心距离的区分度分析结果表明，不同空间位置之间的中心距离存在明显差异。部分位置对（如 Position 1 与 Position 2）在复平面中的中心距离较小，而其他位置组合（如 Position 1 与 Position 3、Position 2 与 Position 3）则表现出较大的中心分离度。这说明，在相同子载波条件下，不同空间位置在 IQ 特征空间中的分布形态并不完全一致，其区分能力具有位置相关性。

### （4）小结

综合第 20 子载波的幅值稳定性与复平面区分度分析结果可以看出，该子载波在不同空间位置下表现出一定程度的统计稳定性，同时在 IQ 特征空间中具备可区分性。这为后续从多子载波、多节点角度构建更具鲁棒性的 CSI 特征表示提供了实验依据。
需要指出的是，本文选取第 20 号子载波作为示例，主要用于展示所提出稳定性与区分度评价方法的计算流程与分析思路，其结果具有代表性，但不限定于单一子载波。



[1. 各位置基础统计量]
位置 (Label)                | 均值 (Mean)  | 标准差 (Std)  | 变异系数 (CV, %)   
---------------------------------------------------------------------------
No Target                 | 19.0891     | 0.8944     | 4.69%
Position 1 (Left-Top)     | 20.0659     | 1.3600     | 6.78%
Position 2 (Right-Top)    | 19.0700     | 0.9321     | 4.89%
Position 3 (Bot-Right)    | 17.2882     | 0.7108     | 4.11%
Position 4 (Center)       | 17.7923     | 1.2581     | 7.07%



为进一步评估 CSI 特征在时间维度上的稳定性与可用性，本文选取第 32 号子载波作为代表，对其在连续帧条件下的幅值与相位变化特性进行分析。相关结果如图 8 所示，其中图 8(a) 和图 8(b) 分别给出了滤波后幅值的时间序列变化及其分布情况，图 8(c) 和图 8(d) 则对应展示了去趋势处理后的相位变化及其统计分布。

表 X 汇总了第 32 号子载波在不同空间位置及“无目标”条件下的统计分析结果，包括幅值均值、原始幅值变异系数（CV）、滤波后幅值变异系数以及去趋势相位的标准差。可以观察到，在各实验条件下，幅值特征的变异系数整体处于 6% 左右，滤波处理后进一步降低至约 4%–9% 区间，表明幅值在同一空间位置内具有较好的时间稳定性。相比之下，相位特征在去卷绕和去趋势处理后，其标准差仍普遍处于较高水平，部分位置可达 10 rad 以上，表现出明显的随机波动特性。

在幅值稳定性评价方面，本文采用变异系数作为主要指标。由于 CSI 幅值为有量纲量，其绝对数值易受传播损耗及环境增益影响，不同位置间的均值水平存在显著差异。在此情况下，仅使用标准差难以客观反映信号的相对稳定程度。变异系数通过对标准差进行归一化处理，可有效消除幅值尺度差异的影响，从而更合理地刻画幅值在统计意义上的相对波动特性。实验结果表明，第 32 号子载波在不同位置下的幅值变异系数均维持在较低水平，说明其幅值特征在静态场景中具有良好的类内稳定性。

相较而言，相位特征的稳定性评价采用标准差指标更为合适。这是由于相位本质上为周期性角度量，其物理意义对应于信号的时间或路径偏移误差。相位的绝对抖动幅度直接反映了由载波频率偏移（CFO）和采样时钟偏移（SFO）等因素引入的同步误差。在相位均值接近零或经解卷绕处理后数值尺度不固定的情况下，变异系数将失去明确的物理解释意义。因此，本文使用相位标准差作为衡量其随机性的主要指标。

从实验结果可以看出，在所采用的分布式单天线架构下，各 ESP32-C6 节点之间缺乏硬件级同步触发机制，其相位特征在时间维度上表现出较强的随机性。即便经过解卷绕与去趋势处理，相位标准差仍维持在较高水平，难以形成稳定可靠的位置表征。相比之下，幅值特征不仅在统计意义上保持较低的相对波动，同时在不同空间位置之间呈现出可区分的均值差异，具备构建位置指纹的潜在优势。

综合上述分析结果，本文在特征工程阶段优先选用 CSI 幅值作为后续建模的输入特征，而不引入相位信息。该选择旨在在保证特征稳定性的前提下，降低由硬件同步误差引入的噪声干扰，从而提升定位模型的鲁棒性，并避免在深度学习训练过程中因高随机性输入导致的过拟合风险。











B. 数据预处理与张量构造

预处理描述

在实际室内环境中采集的 Wi-Fi CSI 信号不可避免地受到硬件噪声、环境多径扰动以及瞬时干扰等因素的影响，其时序序列中通常叠加有一定程度的高频波动。若直接将未经处理的 CSI 数据用于后续张量建模与定位实验，可能导致模型训练过程不稳定，甚至削弱空间特征的可分性。因此，在保持 CSI 时序结构信息的前提下，对原始测量数据进行适当的滤波预处理是必要的。

基于上述考虑，本文采用 Butterworth 低通滤波器对 CSI 子载波时序信号进行预处理，并对不同截止频率参数下的滤波效果进行定量分析。


图 9 给出了典型子载波在经过不同参数 Butterworth 滤波器处理后的时序变化结果。为定量评估滤波器在去噪能力与波形保真性之间的权衡关系，本文从**数值偏差、平滑程度以及形态一致性**三个方面，引入 RMSE、平滑度（Smoothness）和相关系数（Correlation）作为评价指标。

首先，均方根误差（Root Mean Square Error, RMSE）用于衡量滤波后信号相对于原始信号的整体数值偏离程度，其定义为
[
RMSE = \sqrt{\frac{1}{N}\sum_{i=1}^{N}(x_i - y_i)^2},
]
其中 (x_i) 与 (y_i) 分别表示原始 CSI 序列与滤波后序列在第 (i) 个采样点的幅值，(N) 为采样点总数。RMSE 值越小，说明滤波处理在抑制噪声的同时，对原始信号幅值的扰动越小，数值失真程度越低。

其次，为刻画信号的平滑程度，本文基于滤波后序列的一阶差分构造平滑度指标。具体而言，令差分序列 (d_i = y_{i+1}-y_i)，则平滑度定义为差分序列的标准差：
[
Smoothness = \sqrt{\frac{1}{N-1}\sum_{i=1}^{N-1}(d_i-\bar{d})^2}.
]
该指标反映了相邻采样点之间变化幅度的离散程度。由于高频噪声通常表现为局部剧烈波动，平滑度值越小，表明信号变化越连续、抖动越弱，去噪效果越明显。

再次，相关系数采用皮尔逊积矩相关系数，用于评估滤波前后信号在整体形态上的一致性，其定义为
[
r=\frac{\sum(x_i-\bar{x})(y_i-\bar{y})}{\sqrt{\sum(x_i-\bar{x})^2}\sqrt{\sum(y_i-\bar{y})^2}}。
]
该指标主要关注波形的上升、下降趋势以及峰谷位置是否得到保留。相关系数越接近 1，说明滤波操作在平滑信号的同时，较好地保持了原始 CSI 波形的结构特征，未引入明显的相位滞后或形态畸变。

表 X 汇总了不同截止频率 Butterworth 滤波器在上述三个指标上的定量结果。可以观察到，随着截止频率的降低，信号平滑度持续改善，但 RMSE 增大、相关系数下降，表明过强的低通滤波会在抑制噪声的同时削弱原始 CSI 信号的细节信息。相比之下，截止频率为 40 Hz、阶数为 4 的滤波配置在平滑度提升与波形一致性之间取得了相对折中的表现，其相关系数仍保持在较高水平，而平滑度指标较原始信号有明显改善。

基于上述分析，本文在后续实验中采用该参数配置对 CSI 序列进行预处理，以在保证主要时序特征不发生显著改变的前提下，降低高频噪声对后续建模过程的干扰。





C.基于信道状态信息神经网络架构设计

图11是基于CSI的算法整体架构图


图12是MSTC模块图


图13是注意力机制效果图


